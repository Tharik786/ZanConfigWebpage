import{a as P,r as o,j as e,N as k,L as C}from"./vendor-react.js";const v="/api";function A(){const w=P(),[b,d]=o.useState(!1),[n,m]=o.useState({username:"",password:""}),[r,i]=o.useState({username:"",email:"",password:"",confirmPassword:""}),[p,s]=o.useState(""),[h,u]=o.useState("");if(localStorage.getItem("token"))return e.jsx(k,{to:"/",replace:!0});const N=async a=>{if(a.preventDefault(),s(""),u(""),!n.username||!n.password){s("Please enter both username and password.");return}try{const l=await fetch(`${v}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),t=await l.json();if(!l.ok||t.ok===!1){s(t.error||"Invalid username or password!");return}localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),w("/",{replace:!0})}catch{s("Network error. Please try again.")}},S=async a=>{var x,j;a.preventDefault(),s(""),u("");const{username:l,email:t,password:g,confirmPassword:f}=r;if(!l||!t||!g||!f){s("Please fill in all fields.");return}if(g!==f){s("Passwords do not match!");return}try{const y=await fetch(`${v}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),c=await y.json();if(!y.ok||c.ok===!1){(x=c.error)!=null&&x.includes("username")?s("Username already exists!"):(j=c.error)!=null&&j.includes("email")?s("Email already exists!"):s(c.error||"Registration failed.");return}u("Account created successfully! Please sign in."),d(!1),i({username:"",email:"",password:"",confirmPassword:""})}catch{s("Registration failed. Please try again.")}};return e.jsx("div",{className:"login-page-global",children:e.jsxs("div",{className:`auth-wrapper ${b?"panel-active":""}`,children:[p&&e.jsx("div",{className:"alert error-alert",children:p}),h&&e.jsx("div",{className:"alert success-alert",children:h}),e.jsx("div",{className:"auth-form-box register-form-box",children:e.jsxs("form",{onSubmit:S,children:[e.jsx("h1",{children:"Create Account"}),e.jsxs("div",{className:"social-links",children:[e.jsx("a",{children:e.jsx("i",{className:"fab fa-facebook-f"})}),e.jsx("a",{children:e.jsx("i",{className:"fab fa-google"})}),e.jsx("a",{children:e.jsx("i",{className:"fab fa-linkedin-in"})})]}),e.jsx("span",{children:"or use your email for registration"}),e.jsx("input",{type:"text",name:"username",placeholder:"Full Name",value:r.username,onChange:a=>i({...r,[a.target.name]:a.target.value}),required:!0}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:r.email,onChange:a=>i({...r,[a.target.name]:a.target.value}),required:!0}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:a=>i({...r,[a.target.name]:a.target.value}),required:!0}),e.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:r.confirmPassword,onChange:a=>i({...r,[a.target.name]:a.target.value}),required:!0}),e.jsx("button",{type:"submit",children:"Sign Up"})]})}),e.jsx("div",{className:"auth-form-box login-form-box",children:e.jsxs("form",{onSubmit:N,children:[e.jsx("h1",{children:"Sign In"}),e.jsxs("div",{className:"social-links",children:[e.jsx("a",{children:e.jsx("i",{className:"fab fa-facebook-f"})}),e.jsx("a",{children:e.jsx("i",{className:"fab fa-google"})}),e.jsx("a",{children:e.jsx("i",{className:"fab fa-linkedin-in"})})]}),e.jsx("span",{children:"or use your account"}),e.jsx("input",{type:"text",name:"username",placeholder:"Email Address",value:n.username,onChange:a=>m({...n,[a.target.name]:a.target.value}),required:!0}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:n.password,onChange:a=>m({...n,[a.target.name]:a.target.value}),required:!0}),e.jsx(C,{to:"/forgot-password",children:"Forgot your password?"}),e.jsx("button",{type:"submit",children:"Sign In"})]})}),e.jsx("div",{className:"slide-panel-wrapper",children:e.jsxs("div",{className:"slide-panel",children:[e.jsxs("div",{className:"panel-content panel-content-left",children:[e.jsx("h1",{children:"Welcome Back!"}),e.jsx("p",{children:"Stay connected by logging in with your credentials."}),e.jsx("button",{className:"transparent-btn",onClick:()=>d(!1),children:"Sign In"})]}),e.jsxs("div",{className:"panel-content panel-content-right",children:[e.jsx("h1",{children:"Hey There!"}),e.jsx("p",{children:"Begin your amazing journey by creating an account today."}),e.jsx("button",{className:"transparent-btn",onClick:()=>d(!0),children:"Sign Up"})]})]})})]})})}export{A as L};
