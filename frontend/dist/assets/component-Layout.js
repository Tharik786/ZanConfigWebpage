import{u as x,a as j,r as i,j as e,L as o}from"./vendor-react.js";const u="/assets/images/logo.jpeg",v="/api";function g({children:m}){const c=x(),n=j(),[l,r]=i.useState(!1),[s,h]=i.useState(null);i.useEffect(()=>{const a=localStorage.getItem("user");a&&h(JSON.parse(a))},[]),i.useEffect(()=>{r(!1)},[c.pathname]);const p=()=>{const a=localStorage.getItem("token");a&&fetch(`${v}/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${a}`}}).catch(()=>{}),localStorage.removeItem("token"),localStorage.removeItem("user"),n("/login",{replace:!0})},d=((s==null?void 0:s.username)||"U")[0].toUpperCase(),t=a=>c.pathname===a?"nav-link active":"nav-link";return e.jsxs("div",{className:"layout-wrapper",children:[e.jsx("header",{className:"layout-header",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("img",{src:u,alt:"ZanCompute Logo",style:{height:45,width:"auto",objectFit:"contain",borderRadius:6}}),e.jsx("h2",{className:"brand-name",children:"ZanConfig App"})]}),e.jsxs("nav",{className:"desktop-nav",children:[e.jsx(o,{to:"/",className:t("/"),children:"Home"}),e.jsx(o,{to:"/client-app-details",className:t("/client-app-details"),children:"Add Client"}),e.jsx(o,{to:"/client-list",className:t("/client-list"),children:"Client List"})]}),e.jsxs("div",{className:"user-menu",style:{position:"relative",zIndex:2e4},children:[e.jsxs("div",{className:"user-box",onClick:()=>r(!l),children:[e.jsx("div",{className:"user-avatar",children:d}),e.jsxs("div",{className:"user-details",children:[e.jsx("span",{className:"user-name",children:s==null?void 0:s.username}),e.jsx("span",{className:"user-email",children:s==null?void 0:s.email})]}),e.jsx("span",{className:"arrow",children:l?"â–²":"â–¼"})]}),l&&e.jsxs("div",{className:"user-dropdown",children:[e.jsxs("div",{className:"dropdown-header",children:[e.jsx("div",{className:"avatar-big",children:d}),e.jsxs("div",{children:[e.jsx("div",{className:"dropdown-name",children:s==null?void 0:s.username}),e.jsx("div",{className:"dropdown-email",children:s==null?void 0:s.email})]})]}),e.jsx("div",{className:"dropdown-item",onClick:()=>n("/profile"),children:"ğŸ‘¤ Profile"}),e.jsx("div",{className:"dropdown-item",onClick:()=>n("/change-password"),children:"ğŸ” Change Password"}),e.jsx("div",{className:"dropdown-item logout",onClick:p,children:"ğŸšª Logout"})]})]})]})}),e.jsx("main",{className:"layout-main",children:e.jsx("div",{className:"layout-container",children:m})})]})}export{g as L};
