import{r as n,j as e}from"./vendor-react.js";import{A as g}from"./api.js";function x(){const[s,l]=n.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[c,o]=n.useState(!1),[w,r]=n.useState(""),[u,t]=n.useState(""),h=localStorage.getItem("token"),d=a=>{l({...s,[a.target.name]:a.target.value}),r(""),t("")},p=async a=>{if(a.preventDefault(),o(!0),r(""),t(""),!s.currentPassword||!s.newPassword||!s.confirmPassword){r("All fields are required"),o(!1);return}if(s.newPassword!==s.confirmPassword){r("New password and confirmation do not match"),o(!1);return}if(s.newPassword.length<6){r("New password must be at least 6 characters"),o(!1);return}try{const i=await fetch(`${g}/user/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({currentPassword:s.currentPassword,newPassword:s.newPassword})}),f=await i.json();!i.ok||!f.ok?r(f.error||"Failed to change password"):(t("Password changed successfully"),l({currentPassword:"",newPassword:"",confirmPassword:""}))}catch{r("Network error. Please try again.")}finally{o(!1)}};return e.jsx("div",{style:{display:"flex",justifyContent:"center",paddingTop:40},children:e.jsxs("div",{style:{width:"100%",maxWidth:400},children:[e.jsx("h2",{style:{marginBottom:16,textAlign:"center"},children:"Change Password"}),w&&e.jsx("div",{style:{marginBottom:12,padding:10,borderRadius:6,background:"#fee2e2",color:"#b91c1c",fontSize:14},children:w}),u&&e.jsx("div",{style:{marginBottom:12,padding:10,borderRadius:6,background:"#dcfce7",color:"#166534",fontSize:14},children:u}),e.jsxs("form",{onSubmit:p,style:{display:"flex",flexDirection:"column",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:14},children:"Current Password"}),e.jsx("input",{type:"password",name:"currentPassword",value:s.currentPassword,onChange:d,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #d1d5db",fontSize:14}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:14},children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",value:s.newPassword,onChange:d,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #d1d5db",fontSize:14}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:14},children:"Confirm New Password"}),e.jsx("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:d,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #d1d5db",fontSize:14}})]}),e.jsx("button",{type:"submit",disabled:c,style:{padding:"8px 12px",background:"#3246a8",color:"#fff",border:"none",borderRadius:4,fontSize:14,cursor:"pointer"},children:c?"Changingâ€¦":"Change Password"})]})]})})}export{x as C};
